MONGODB_URI=
PORT=4000

# Allowed browser origins for CORS (comma-separated). No trailing slash.
# Examples:
# CLIENT_ORIGINS=http://localhost:3000
# CLIENT_ORIGINS=https://dot-pay.vercel.app
CLIENT_ORIGINS=http://localhost:3000

# Shared secret between Next.js and backend (required for notifications endpoints).
DOTPAY_INTERNAL_API_KEY=

# ---- M-Pesa (Daraja) ----
# MPESA_ENV=sandbox|production
MPESA_ENV=production
MPESA_BASE_URL=https://api.safaricom.co.ke
MPESA_TIMEOUT_MS=30000

# Daraja app credentials
MPESA_DEV_CONSUMER_KEY=
MPESA_DEV_CONSUMER_SECRET=
MPESA_DEV_SHORTCODE=
MPESA_DEV_PASSKEY=
MPESA_DEV_INITIATOR_NAME=
MPESA_DEV_SECURITY_CREDENTIAL=

# Optional production credentials
MPESA_PROD_CONSUMER_KEY=
MPESA_PROD_CONSUMER_SECRET=
MPESA_PROD_SHORTCODE=
MPESA_PROD_PASSKEY=
MPESA_PROD_INITIATOR_NAME=
MPESA_PROD_SECURITY_CREDENTIAL=

# Optional overrides
MPESA_B2C_SHORTCODE=
MPESA_B2B_SHORTCODE=
MPESA_B2C_URL=https://api.safaricom.co.ke/mpesa/b2c/v1/paymentrequest
MPESA_B2B_URL=https://api.safaricom.co.ke/mpesa/b2b/v1/paymentrequest

# Callback base URL and optional callback token
MPESA_WEBHOOK_URL=https://your-backend-domain.com
MPESA_CALLBACK_TOKEN=

# Optional explicit callback URLs
# MPESA_STK_CALLBACK_URL=https://your-backend-domain.com/api/mpesa/stk-callback
# MPESA_B2C_RESULT_URL=https://your-backend-domain.com/api/mpesa/b2c-callback
# MPESA_B2C_TIMEOUT_URL=https://your-backend-domain.com/api/mpesa/queue-timeout
# MPESA_B2B_RESULT_URL=https://your-backend-domain.com/api/mpesa/b2b-callback
# MPESA_B2B_TIMEOUT_URL=https://your-backend-domain.com/api/mpesa/queue-timeout

# Fiat conversion helper used by frontend for previews.
KES_PER_USD=130

# Offramp funding guard:
# - true: require a confirmed treasury funding tx hash before B2C payout request.
# - false: allow direct B2C request without on-chain funding metadata.
MPESA_REQUIRE_ONCHAIN_FUNDING=true

# Treasury EVM address used for USDC funding on crypto->M-Pesa withdrawals.
TREASURY_PLATFORM_ADDRESS=
